<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ishaanshares</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css">
    <style>
        body {
            background-color: #0d1117;
            color: #c9d1d9;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji";
            background-image: url('default-background.jpg');
            background-size: cover;
            background-attachment: fixed;
            transition: background 0.5s ease;
        }
        .section {
            margin-top: 20px;
        }
        .form-control, .btn {
            background-color: #161b22;
            border: 1px solid #30363d;
            color: #c9d1d9;
        }
        .form-control:focus, .btn:focus {
            box-shadow: none;
            border-color: #58a6ff;
        }
        .btn-success {
            background-color: #2f9e44;
            border-color: #2f9e44;
        }
        .btn-success:hover {
            background-color: #2a8b3d;
            border-color: #2a8b3d;
        }
        .process-item {
            background-color: #161b22;
            padding: 10px;
            margin-bottom: 10px;
            border-radius: 5px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
        }
        .process-title {
            font-weight: bold;
        }
        .process-progress {
            width: 100%;
            background-color: #30363d;
            border-radius: 5px;
            overflow: hidden;
            margin-top: 5px;
        }
        .progress-bar {
            height: 10px;
            background-color: #58a6ff;
            width: 0%;
        }
        .process-status {
            margin-top: 5px;
            font-size: 14px;
        }
    </style>
</head>
<body>
    <header class="bg-dark text-light py-3">
        <div class="container text-center">
            <h1>Ishaanshares</h1>
            <p>Share your posts automatically with ease.</p>
        </div>
    </header>

    <section id="share" class="container py-5 section">
        <h2 class="text-center">Auto Share Your Posts</h2>
        <form id="shareForm" class="p-4">
            <div class="mb-3">
                <label for="cookies" class="form-label">Facebook Cookie (JSON format)</label>
                <textarea id="cookies" class="form-control" placeholder='[{"key": "c_user", "value": "your_value", "domain": "facebook.com", "path": "/"}]' required></textarea>
            </div>
            <div class="mb-3">
                <label for="urls" class="form-label">Post URL</label>
                <input type="url" id="urls" class="form-control" placeholder="Enter the post URL" required>
            </div>
            <div class="mb-3">
                <label for="amounts" class="form-label">Number of Shares</label>
                <input type="number" id="amounts" class="form-control" min="1" max="200000" placeholder="Enter the number of shares" required>
            </div>
            <div class="mb-3">
                <label for="intervals" class="form-label">Interval (seconds)</label>
                <input type="number" id="intervals" class="form-control" min="1" max="60" placeholder="Enter interval between shares" required>
            </div>
            <button type="submit" id="submit-button" class="btn btn-success w-100">Start Sharing</button>
        </form>
        <div id="result" class="mt-3 text-center"></div>
    </section>

    <div id="process-container"></div>

    <script>
        const apiEndpoint = "https://spamshare-api-git-main-lucifurges-projects.vercel.app/api/spam";

        function addProcess(processTitle) {
            const processList = document.getElementById('process-container');
            const processItem = document.createElement('div');
            processItem.classList.add('process-item');
            const processTitleElem = document.createElement('div');
            processTitleElem.classList.add('process-title');
            processTitleElem.innerText = processTitle;

            const processProgressContainer = document.createElement('div');
            processProgressContainer.classList.add('process-progress');
            const progressBar = document.createElement('div');
            progressBar.classList.add('progress-bar');
            progressBar.style.width = '0%';
            progressBar.setAttribute('role', 'progressbar');
            processProgressContainer.appendChild(progressBar);

            const processStatus = document.createElement('div');
            processStatus.classList.add('process-status');
            processStatus.innerText = 'In Progress...';

            processItem.appendChild(processTitleElem);
            processItem.appendChild(processProgressContainer);
            processItem.appendChild(processStatus);

            processList.appendChild(processItem);

            return { processItem, progressBar, processStatus };
        }

        function updateProcessProgress(progressBar, processStatus, progress) {
            progressBar.style.width = progress + '%';
            progressBar.setAttribute('aria-valuenow', progress);
            processStatus.innerText = progress === 100 ? 'Completed' : 'In Progress...';
        }

        document.getElementById('shareForm').addEventListener('submit', async (event) => {
            event.preventDefault();
            const cookies = document.getElementById('cookies').value;
            const fbLink = document.getElementById('urls').value;
            const shareCount = parseInt(document.getElementById('amounts').value);
            const interval = parseFloat(document.getElementById('intervals').value);

            const resultMessage = document.getElementById('result');
            resultMessage.innerText = "Successfully Started Sharing...";

            const { processItem, progressBar, processStatus } = addProcess('Sharing Post...');
            
            try {
                const response = await fetch(apiEndpoint, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        cookies: JSON.parse(cookies),
                        fbLink,
                        shareCount,
                        interval
                    })
                });

                if (response.ok) {
                    const result = await response.json();
                    let progress = 0;
                    const intervalId = setInterval(() => {
                        progress += 10;
                        updateProcessProgress(progressBar, processStatus, progress);
                        if (progress >= 100) {
                            clearInterval(intervalId);
                            resultMessage.innerText = result.message || 'Sharing completed successfully!';
                        }
                    }, 1000);
                } else {
                    const errorText = await response.text();
                    resultMessage.innerText = `Error: ${response.status} - ${errorText}`;
                }
            } catch (error) {
                console.error('Request Error:', error);
                resultMessage.innerText = `Error: ${error.message}`;
            }
        });
    </script>
</body>
</html>
